<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body ng-app="docsTabsExample">



<my-tabs>
    <my-pane title="Hello">
        <h4>Hello</h4>
        <p>Lorem ipsum dolor sit amet</p>
    </my-pane>
    <my-pane title="World">
        <h4>World</h4>
        <em>Mauris elementum elementum enim at suscipit.</em>
        <p><a href ng-click="i = i + 1">counter: {{i || 0}}</a></p>
    </my-pane>
</my-tabs>



<script src="../angular.js"></script>
<script>
    /**
     * Created by Abhishek Dey on 8/8/15.*/

    angular.module('docsTabsExample', [])
            .directive('myTabs', function() {
                return {
                    restrict: 'E',
                    transclude: true,
                    scope: {},
                    controller: function($scope) {
                        var panes = $scope.panes = [];

                        $scope.select = function(pane) {
                            angular.forEach(panes, function(pane) {
                                pane.selected = false;
                            });
                            pane.selected = true;
                        };

                        this.addPane = function(pane) {
                            if (panes.length === 0) {
                                $scope.select(pane);
                            }
                            panes.push(pane);
                        };
                    },
                    templateUrl: 'my-tabs.html'
                };
            })
            .directive('myPane', function() {
                return {
                    require: '^myTabs',
                    /*The ^ prefix means that this directive searches for the directive on its parents
                     (without the ^ prefix, the directive would look for the controller on just its own element*/
                    restrict: 'E',
                    transclude: true,
                    scope: {
                        title: '@'
                    },
                    /*When a directive requires a controller, it receives that controller as the fourth argument of its link function.*/
                    link: function(scope, element, attrs, tabsCtrl) {
                        tabsCtrl.addPane(scope);
                    },
                    templateUrl: 'my-pane.html'
                };
            });
</script>

</body>
</html>