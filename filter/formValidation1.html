<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Form Validation</title>
    <script src="../angular.js"></script>
    <script>
        angular.module('validationExample', [])
                .directive('ensureUnique', function($http) {
                    return {
                        require: 'ngModel',
                        link: function(scope, ele, attrs, c) {
                            scope.$watch(attrs.ngModel, function() {
                                $http({
                                    method: 'POST',
                                    url: '/api/check/' + attrs.ensureUnique,
                                    data: {'field': attrs.ensureUnique}
                                }).success(function(data,status,headers,cfg) {
                                    c.$setValidity('unique', data.isUnique);
                                }).error(function(data,status,headers,cfg) {
                                    c.$setValidity('unique', false);
                                });
                            });
                        }
                    }
                });
    </script>
</head>
<body>

    <input ensureUnique type="text" value="" placeholder="enter userName">
</body>
</html>