<!DOCTYPE html>
<html ng-app="app">
<head>
    <script src="../angular.js"></script>
    <meta charset=utf-8 />
    <title>Decorator</title>
</head>
<body ng-controller="MainCtrl">
public variable: {{foo.variable}}
<br />
private variable (through getter): {{foo.getPrivate()}}
<br />
greet: {{foo.greet()}}

<script>
    app = angular.module("app", []);

    app.controller('MainCtrl', function($scope, foo) {
        $scope.foo = foo;
    });

    app.factory('foo', function() {
        var thisIsPrivate = "Private";
        function getPrivate() {
            return thisIsPrivate;
        }

        return {
            variable: "This is public",
            getPrivate: getPrivate
        };
    });

    app.config(function($provide) {
        $provide.decorator('foo', function($delegate) {
            $delegate.greet = function() {
                return "Hello, I am a new function of 'foo'";
            };

            return $delegate;
        });
    });
</script>
</body>
</html>